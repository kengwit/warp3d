c
c	Crushing of a pipe
c
c	This input file simulates the crushing of a pipe into a rigid box.
c       The mesh models the full cross section of the pipe, but in plane
c       strain.  The pipe has a inner radius of 4 inches and a wall
c       thickness of 1 inch.
c
c	Because of the large amount of deformation, the model requires
c       1000 load steps to crush the pipe to about 1/2 of its original size.
c
c       time step size is often changed as a simple means to
c       scale the incremental loading magnitude.
c
 structure crush_pipe
c
 material steel
c   properties mises e 30000 nu 0.3 yld_pt 60.0 n_power 10.0
  properties bilinear e 30000 nu 0.3 yld_pt 60.0 tan_e 500
c
 number of nodes 496 elements   186
c
 elements
 1-186 type l3disop  nlgeom material steel,
       order 2x2x2 bbar center_output short
c
*input from "test_41a_coord_incid.inp"
c
 blocking automatic
c
 constraints
c
     1-496  w  0.0  $ make model plane strain
c
c	displacement control loading -- we perscribe displacement loading
c       on the top two nodes of the pipe to help with stability.  Very small
c       initial loading.
c
 287 288 v -0.000001 u 0.0
 303 304 271 272 u 0.0
c
 loading test
  nonlinear
    step 1-1000 constraints 1.0
c
 nonlinear analysis parameters
   solution technique direct sparse
   maximum iterations 20
   minimum iterations 2
   convergence test norm res tol 0.01
   extrapolate on
   line search on details
   nonconvergent solutions stop
   adaptive on
   batch messages off
   cpu time limit off
   material messages off
   bbar stabilization factor 0.0
   consistent q-matrix on
   time step 0.0001
   trace solution on
c
contact planes
  shape 1 plane
	point -5 -5 -10
	point -5 -5 +10
	point +5 -5 -10
	stiffness 10.0e5
  shape 2 plane
	point -5 -5 +10
	point -5 -5 -10
	point -5 +5 +10
	stiffness 10.0e5
  shape 3 plane
	point +5 -5 +10
	point +5 +5 +10
	point +5 -5 -10
	stiffness 10.0e5
  shape 4 plane
	point -5 +5.0 -10
	point +5 +5.0 -10
	point -5 +5.0 +10
	stiffness 10.0e5
	velocity 0.0 -0.01 0.0
c
 list 'nodes_a" 271 272 287 288 303 304 216 215 200 199 232 231
c 
   compute displacements for loading test  step    1
   output displacements nodes 'nodes_a'
   output reactions nodes 'nodes_a'
c
c	Increase loading.
c
 constraints
c
     1-496  w  0.0
c
c	displacement control loading
c
 287 288 v -0.0025 u 0.0
 303 304 271 272 u 0.0
c
 nonlinear analysis parameters
   time step 0.25
c
   compute displacements for loading test     step    2
   output displacements nodes 'nodes_a'
   output reactions  nodes 'nodes_a'
c
   compute displacements for loading test     step    3
   output displacements nodes 'nodes_a'
   output reactions nodes 'nodes_a'
c
   compute displacements for loading test     step   50
c
   compute displacements for loading test     step    100
   output patran formatted displacements stresses
c
   compute displacements for loading test     step   150
   output patran formatted displacements stresses
c
   compute displacements for loading test     step  200
   output patran formatted displacements stresses
   output displacements  nodes 'nodes_a'
   output reactions  nodes 'nodes_a'
c
   output commands file "41a_get_patran.inp" steps 250-1000 by 10
c
   compute displacements for loading test     step  1000
c
   output displacements  nodes 'nodes_a'
   output reactions  nodes 'nodes_a'
c
 stop






